{"level":"info","msg":"waiting for stock grpc client, timeout: 10 seconds","time":"2025-02-22 13:51:13"}
{"level":"info","msg":"Discovered 1 instance of stock, addrs=[127.0.0.1:5003]","time":"2025-02-22 13:51:13"}
{"addr":"127.0.0.1:5002","level":"info","msg":"registered to consul","serviceName":"order","time":"2025-02-22 13:51:13"}
{"level":"info","msg":"grpc server strat, listening on 127.0.0.1:5002","time":"2025-02-22 13:51:13"}
{"args":"{\"customer_id\":\"1567\",\"Items\":[{\"ID\":\"prod_RmBpuP8FdzkPV0\",\"Quantity\":1},{\"ID\":\"prod_RmBpuP8FdzkPV0\",\"Quantity\":1},{\"ID\":\"prod_RmBpuP8FdzkPV0\",\"Quantity\":1}]}","from":"127.0.0.1","level":"info","msg":"_request_in","start":1740203683,"time":"2025-02-22 13:54:43","uri":"/api/customer/(customerID)/orders"}
{"args":"[{\"ID\":\"prod_RmBpuP8FdzkPV0\",\"Quantity\":3}]","cost_ms":1145,"level":"info","method":"StockGRPC.CheckIfItemsInStock","msg":"_request_success","response":null,"time":"2025-02-22 13:54:44"}
{"args":"{\"order\":{\"ID\":\"\",\"CustomerID\":\"1567\",\"Status\":\"pending\",\"PaymentLink\":\"\",\"Items\":[{\"ID\":\"prod_RmBpuP8FdzkPV0\",\"Name\":\"fires\",\"Quantity\":3,\"PriceID\":\"price_1QsdSB9Q405C6VieepzsBJyX\"}]}}","cost_ms":3,"level":"info","method":"OrderRepositoryMongo.Create","msg":"_request_success","response":null,"time":"2025-02-22 13:54:44"}
{"args":"{\"Channel\":{},\"Routing\":\"direct\",\"Queue\":\"order.created\",\"Exchange\":\"\",\"Body\":{\"ID\":\"67b966a4c7181c7e50030e84\",\"CustomerID\":\"1567\",\"Status\":\"pending\",\"PaymentLink\":\"\",\"Items\":[{\"ID\":\"prod_RmBpuP8FdzkPV0\",\"Name\":\"fires\",\"Quantity\":3,\"PriceID\":\"price_1QsdSB9Q405C6VieepzsBJyX\"}]}}","cost_ms":1,"level":"info","msg":"_mq_publish_success","response":null,"time":"2025-02-22 13:54:44"}
{"cmd":{"CustomerID":"1567","Items":[{"ID":"prod_RmBpuP8FdzkPV0","Quantity":1},{"ID":"prod_RmBpuP8FdzkPV0","Quantity":1},{"ID":"prod_RmBpuP8FdzkPV0","Quantity":1}]},"level":"info","msg":"CreateOrderHandler_command_success","time":"2025-02-22 13:54:44"}
{"command":"CreateOrder","command_body":"{\"CustomerID\":\"1567\",\"Items\":[{\"ID\":\"prod_RmBpuP8FdzkPV0\",\"Quantity\":1},{\"ID\":\"prod_RmBpuP8FdzkPV0\",\"Quantity\":1},{\"ID\":\"prod_RmBpuP8FdzkPV0\",\"Quantity\":1}]}","level":"info","msg":"Query execute successfully","time":"2025-02-22 13:54:44"}
{"cost_ms":1153,"level":"info","msg":"_request_out","response":"{\"errno\":0,\"message\":\"success\",\"data\":{\"order_id\":\"67b966a4c7181c7e50030e84\",\"customer_id\":\"1567\",\"redirect_url\":\"http://localhost:8282/success?customerID=1567\\u0026orderID=67b966a4c7181c7e50030e84\"},\"trace_id\":\"a0ba37fb3c6d0c3990e5fd8c956da736\"}","time":"2025-02-22 13:54:44"}
{"args":{"ID":"67b966a4c7181c7e50030e84","CustomerID":"1567","Status":"waiting_for_payment","Items":[{"ID":"prod_RmBpuP8FdzkPV0","Name":"fires","Quantity":3,"PriceID":"price_1QsdSB9Q405C6VieepzsBJyX"}],"PaymentLink":"https://checkout.stripe.com/c/pay/cs_test_a1mGuvF0v0qJWS8nX3YSRbpPIPUuxbnE5ltT5pwRMy64vsH8UObwbi4zwC#fidkdWxOYHwnPyd1blpxYHZxWjA0VHRod2E8VDE1MEYzU2xgPWwwPU9vVW01PWNdQGRXYGs8TDd8dktsS0NwcDNPU2NnZGg1UUJhbTdcb0tidWhQUjJgXE9Sf1dCakRfS098dm10fEwwPWt%2FNTU1QnZ9TF9wTicpJ2N3amhWYHdzYHcnP3F3cGApJ2lkfGpwcVF8dWAnPyd2bGtiaWBabHFgaCcpJ2BrZGdpYFVpZGZgbWppYWB3dic%2FcXdwYHgl"},"grpc_metadata":{":authority":["127.0.0.1:5002"],"content-type":["application/grpc"],"traceparent":["00-a0ba37fb3c6d0c3990e5fd8c956da736-77095f567c42e6dc-01"],"user-agent":["grpc-go/1.67.1"],"x-b3-sampled":["1"],"x-b3-spanid":["77095f567c42e6dc"],"x-b3-traceid":["a0ba37fb3c6d0c3990e5fd8c956da736"]},"level":"info","msg":"_grpc_request_in","time":"2025-02-22 13:54:45"}
{"args":"{\"customerID\":\"1567\",\"id\":\"67b966a4c7181c7e50030e84\"}","cost_ms":1,"level":"info","method":"OrderRepositoryMongo.Get","msg":"_request_success","response":null,"time":"2025-02-22 13:54:45"}
{"args":"{\"order\":{\"ID\":\"67b966a4c7181c7e50030e84\",\"CustomerID\":\"1567\",\"Status\":\"waiting_for_payment\",\"PaymentLink\":\"https://checkout.stripe.com/c/pay/cs_test_a1mGuvF0v0qJWS8nX3YSRbpPIPUuxbnE5ltT5pwRMy64vsH8UObwbi4zwC#fidkdWxOYHwnPyd1blpxYHZxWjA0VHRod2E8VDE1MEYzU2xgPWwwPU9vVW01PWNdQGRXYGs8TDd8dktsS0NwcDNPU2NnZGg1UUJhbTdcb0tidWhQUjJgXE9Sf1dCakRfS098dm10fEwwPWt%2FNTU1QnZ9TF9wTicpJ2N3amhWYHdzYHcnP3F3cGApJ2lkfGpwcVF8dWAnPyd2bGtiaWBabHFgaCcpJ2BrZGdpYFVpZGZgbWppYWB3dic%2FcXdwYHgl\",\"Items\":[{\"ID\":\"prod_RmBpuP8FdzkPV0\",\"Name\":\"fires\",\"Quantity\":3,\"PriceID\":\"price_1QsdSB9Q405C6VieepzsBJyX\"}]}}","cost_ms":5,"level":"info","method":"OrderRepositoryMongo.Update","msg":"_request_success","response":null,"time":"2025-02-22 13:54:45"}
{"command":"UpdateOrder","command_body":"","level":"info","msg":"Query execute successfully","time":"2025-02-22 13:54:45"}
{"grpc.code":"OK","grpc.method":"UpdateOrder","grpc.service":"orderpb.OrderService","grpc.start_time":"2025-02-22T13:54:45+08:00","grpc.time_ms":7.173,"level":"info","msg":"finished unary call with code OK","peer.address":"127.0.0.1:51348","span.kind":"server","system":"grpc","time":"2025-02-22 13:54:45"}
