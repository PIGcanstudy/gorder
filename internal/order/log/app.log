[0;90m[0000][0m [0;32m INFO[0m waiting for stock grpc client, timeout: 10 seconds
[0;90m[0000][0m [0;32m INFO[0m Discovered 1 instance of stock, addrs=[127.0.0.1:5003]
[0;90m[0000][0m [0;32m INFO[0m registered to consul [0;32maddr[0m=127.0.0.1:5002 [0;32mserviceName[0m=order
[0;90m[0000][0m [0;32m INFO[0m grpc server strat, listening on 127.0.0.1:5002
[0;90m[0209][0m [0;32m INFO[0m _request_in [0;32margs[0m={"customer_id":"1567","Items":[{"ID":"prod_RmBpuP8FdzkPV0","Quantity":1},{"ID":"prod_RmBpuP8FdzkPV0","Quantity":1},{"ID":"prod_RmBpuP8FdzkPV0","Quantity":1}]} [0;32mfrom[0m=127.0.0.1 [0;32mstart[0m=1740203683 [0;32mtrace[0m=00000000000000000000000000000000 [0;32muri[0m=/api/customer/(customerID)/orders
[0;90m[0211][0m [0;32m INFO[0m _request_success [0;32margs[0m=[{"ID":"prod_RmBpuP8FdzkPV0","Quantity":3}] [0;32mcost_ms[0m=1145 [0;32mmethod[0m=StockGRPC.CheckIfItemsInStock [0;32mresponse[0m=<nil> [0;32mtrace[0m=a0ba37fb3c6d0c3990e5fd8c956da736
[0;90m[0211][0m [0;32m INFO[0m _request_success [0;32margs[0m={"order":{"ID":"","CustomerID":"1567","Status":"pending","PaymentLink":"","Items":[{"ID":"prod_RmBpuP8FdzkPV0","Name":"fires","Quantity":3,"PriceID":"price_1QsdSB9Q405C6VieepzsBJyX"}]}} [0;32mcost_ms[0m=3 [0;32mmethod[0m=OrderRepositoryMongo.Create [0;32mresponse[0m=<nil> [0;32mtrace[0m=a0ba37fb3c6d0c3990e5fd8c956da736
[0;90m[0211][0m [0;32m INFO[0m _mq_publish_success [0;32margs[0m={"Channel":{},"Routing":"direct","Queue":"order.created","Exchange":"","Body":{"ID":"67b966a4c7181c7e50030e84","CustomerID":"1567","Status":"pending","PaymentLink":"","Items":[{"ID":"prod_RmBpuP8FdzkPV0","Name":"fires","Quantity":3,"PriceID":"price_1QsdSB9Q405C6VieepzsBJyX"}]}} [0;32mcost_ms[0m=1 [0;32mresponse[0m=<nil> [0;32mtrace[0m=a0ba37fb3c6d0c3990e5fd8c956da736
[0;90m[0211][0m [0;32m INFO[0m CreateOrderHandler_command_success [0;32mcmd[0m={CustomerID:1567 Items:[0xc000406030 0xc000406060 0xc000406078]} [0;32mtrace[0m=a0ba37fb3c6d0c3990e5fd8c956da736
[0;90m[0211][0m [0;32m INFO[0m Query execute successfully [0;32mcommand[0m=CreateOrder [0;32mcommand_body[0m={"CustomerID":"1567","Items":[{"ID":"prod_RmBpuP8FdzkPV0","Quantity":1},{"ID":"prod_RmBpuP8FdzkPV0","Quantity":1},{"ID":"prod_RmBpuP8FdzkPV0","Quantity":1}]} [0;32mtrace[0m=a0ba37fb3c6d0c3990e5fd8c956da736
[0;90m[0211][0m [0;32m INFO[0m _request_out [0;32mcost_ms[0m=1153 [0;32mresponse[0m={"errno":0,"message":"success","data":{"order_id":"67b966a4c7181c7e50030e84","customer_id":"1567","redirect_url":"http://localhost:8282/success?customerID=1567\u0026orderID=67b966a4c7181c7e50030e84"},"trace_id":"a0ba37fb3c6d0c3990e5fd8c956da736"} [0;32mtrace[0m=00000000000000000000000000000000
[0;90m[0212][0m [0;32m INFO[0m _grpc_request_in [0;32margs[0m=ID:"67b966a4c7181c7e50030e84"  CustomerID:"1567"  Status:"waiting_for_payment"  Items:{ID:"prod_RmBpuP8FdzkPV0"  Name:"fires"  Quantity:3  PriceID:"price_1QsdSB9Q405C6VieepzsBJyX"}  PaymentLink:"https://checkout.stripe.com/c/pay/cs_test_a1mGuvF0v0qJWS8nX3YSRbpPIPUuxbnE5ltT5pwRMy64vsH8UObwbi4zwC#fidkdWxOYHwnPyd1blpxYHZxWjA0VHRod2E8VDE1MEYzU2xgPWwwPU9vVW01PWNdQGRXYGs8TDd8dktsS0NwcDNPU2NnZGg1UUJhbTdcb0tidWhQUjJgXE9Sf1dCakRfS098dm10fEwwPWt%2FNTU1QnZ9TF9wTicpJ2N3amhWYHdzYHcnP3F3cGApJ2lkfGpwcVF8dWAnPyd2bGtiaWBabHFgaCcpJ2BrZGdpYFVpZGZgbWppYWB3dic%2FcXdwYHgl" [0;32mgrpc_metadata[0m=map[:authority:[127.0.0.1:5002] content-type:[application/grpc] traceparent:[00-a0ba37fb3c6d0c3990e5fd8c956da736-77095f567c42e6dc-01] user-agent:[grpc-go/1.67.1] x-b3-sampled:[1] x-b3-spanid:[77095f567c42e6dc] x-b3-traceid:[a0ba37fb3c6d0c3990e5fd8c956da736]] [0;32mtrace[0m=a0ba37fb3c6d0c3990e5fd8c956da736
[0;90m[0212][0m [0;32m INFO[0m _request_success [0;32margs[0m={"customerID":"1567","id":"67b966a4c7181c7e50030e84"} [0;32mcost_ms[0m=1 [0;32mmethod[0m=OrderRepositoryMongo.Get [0;32mresponse[0m=<nil> [0;32mtrace[0m=a0ba37fb3c6d0c3990e5fd8c956da736
[0;90m[0212][0m [0;32m INFO[0m _request_success [0;32margs[0m={"order":{"ID":"67b966a4c7181c7e50030e84","CustomerID":"1567","Status":"waiting_for_payment","PaymentLink":"https://checkout.stripe.com/c/pay/cs_test_a1mGuvF0v0qJWS8nX3YSRbpPIPUuxbnE5ltT5pwRMy64vsH8UObwbi4zwC#fidkdWxOYHwnPyd1blpxYHZxWjA0VHRod2E8VDE1MEYzU2xgPWwwPU9vVW01PWNdQGRXYGs8TDd8dktsS0NwcDNPU2NnZGg1UUJhbTdcb0tidWhQUjJgXE9Sf1dCakRfS098dm10fEwwPWt%2FNTU1QnZ9TF9wTicpJ2N3amhWYHdzYHcnP3F3cGApJ2lkfGpwcVF8dWAnPyd2bGtiaWBabHFgaCcpJ2BrZGdpYFVpZGZgbWppYWB3dic%2FcXdwYHgl","Items":[{"ID":"prod_RmBpuP8FdzkPV0","Name":"fires","Quantity":3,"PriceID":"price_1QsdSB9Q405C6VieepzsBJyX"}]}} [0;32mcost_ms[0m=5 [0;32mmethod[0m=OrderRepositoryMongo.Update [0;32mresponse[0m=<nil> [0;32mtrace[0m=a0ba37fb3c6d0c3990e5fd8c956da736
[0;90m[0212][0m [0;32m INFO[0m UpdateOrderHandler_command_success [0;32mcmd[0m={Order:0xc0006a01e0 UpdateFn:0xea8060}
[0;90m[0212][0m [0;32m INFO[0m Query execute successfully [0;32mcommand[0m=UpdateOrder [0;32mcommand_body[0m= [0;32mtrace[0m=a0ba37fb3c6d0c3990e5fd8c956da736
[0;90m[0212][0m [0;32m INFO[0m finished unary call with code OK [0;32mgrpc.code[0m=OK [0;32mgrpc.method[0m=UpdateOrder [0;32mgrpc.service[0m=orderpb.OrderService [0;32mgrpc.start_time[0m=2025-02-22T13:54:45+08:00 [0;32mgrpc.time_ms[0m=7.173 [0;32mpeer.address[0m=127.0.0.1:51348 [0;32mspan.kind[0m=server [0;32msystem[0m=grpc [0;32mtrace[0m=a0ba37fb3c6d0c3990e5fd8c956da736
